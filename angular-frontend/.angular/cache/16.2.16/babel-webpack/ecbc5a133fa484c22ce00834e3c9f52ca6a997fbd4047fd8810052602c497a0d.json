{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/core/services/auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction VerificarCodigoComponent_div_7_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.error);\n  }\n}\nfunction VerificarCodigoComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 10);\n    i0.ɵɵtext(2, \"C\\u00F3digo de verificaci\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function VerificarCodigoComponent_div_7_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.codigo = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function VerificarCodigoComponent_div_7_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.verificarCodigo());\n    });\n    i0.ɵɵtext(5, \"Verificar C\\u00F3digo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, VerificarCodigoComponent_div_7_p_6_Template, 2, 1, \"p\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.codigo);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.error);\n  }\n}\nfunction VerificarCodigoComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"p\");\n    i0.ɵɵtext(2, \"C\\u00F3digo verificado correctamente. Ahora puedes crear una nueva contrase\\u00F1a.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function VerificarCodigoComponent_div_8_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.irANuevaContrasena());\n    });\n    i0.ɵɵtext(4, \"Continuar\");\n    i0.ɵɵelementEnd()();\n  }\n}\nlet VerificarCodigoComponent = /*#__PURE__*/(() => {\n  class VerificarCodigoComponent {\n    route;\n    router;\n    authService;\n    correo = '';\n    codigo = '';\n    error = '';\n    codigoVerificado = false;\n    constructor(route, router, authService) {\n      this.route = route;\n      this.router = router;\n      this.authService = authService;\n    }\n    ngOnInit() {\n      // Obtener el correo de los parámetros de consulta\n      this.route.queryParams.subscribe(params => {\n        this.correo = params['correo'];\n        if (!this.correo) {\n          this.error = 'No se proporcionó un correo electrónico válido.';\n          // Redirigir a la página de recuperación si no hay correo\n          setTimeout(() => {\n            this.router.navigate(['/recuperar']);\n          }, 2000);\n        }\n      });\n    }\n    verificarCodigo() {\n      if (!this.codigo) {\n        this.error = 'Por favor, ingresa el código de verificación.';\n        return;\n      }\n      this.authService.verificarCodigo(this.correo, this.codigo).subscribe({\n        next: () => {\n          this.codigoVerificado = true;\n          this.error = '';\n        },\n        error: err => {\n          this.error = err.error?.message || 'El código ingresado no es válido. Inténtalo nuevamente.';\n        }\n      });\n    }\n    irANuevaContrasena() {\n      this.router.navigate(['/nueva-contrasena'], {\n        queryParams: {\n          correo: this.correo\n        }\n      });\n    }\n    static ɵfac = function VerificarCodigoComponent_Factory(t) {\n      return new (t || VerificarCodigoComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: VerificarCodigoComponent,\n      selectors: [[\"app-verificar-codigo\"]],\n      decls: 19,\n      vars: 2,\n      consts: [[1, \"login-wrapper\"], [1, \"login-box\"], [1, \"login-left\"], [1, \"instruccion\"], [4, \"ngIf\"], [\"class\", \"mensaje-exito\", 4, \"ngIf\"], [1, \"login-right\"], [1, \"logo-container\"], [\"src\", \"assets/logo_ucentral.png\", \"alt\", \"Universidad Central\", 1, \"logo\"], [1, \"university-name\"], [\"for\", \"codigo\"], [\"type\", \"text\", \"id\", \"codigo\", \"name\", \"codigo\", \"placeholder\", \"Ingresa el c\\u00F3digo de 6 d\\u00EDgitos\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 3, \"click\"], [\"class\", \"mensaje-error\", 4, \"ngIf\"], [1, \"mensaje-error\"], [1, \"mensaje-exito\"], [\"type\", \"button\", 3, \"click\"]],\n      template: function VerificarCodigoComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\");\n          i0.ɵɵtext(4, \"Verificar C\\u00F3digo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p\", 3);\n          i0.ɵɵtext(6, \"Ingresa el c\\u00F3digo de verificaci\\u00F3n que te hemos enviado a tu correo electr\\u00F3nico.\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(7, VerificarCodigoComponent_div_7_Template, 7, 2, \"div\", 4);\n          i0.ɵɵtemplate(8, VerificarCodigoComponent_div_8_Template, 5, 0, \"div\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 7);\n          i0.ɵɵelement(11, \"img\", 8);\n          i0.ɵɵelementStart(12, \"div\", 9)(13, \"h1\");\n          i0.ɵɵtext(14, \"UNIVERSIDAD\");\n          i0.ɵɵelement(15, \"br\");\n          i0.ɵɵtext(16, \"CENTRAL\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"p\");\n          i0.ɵɵtext(18, \"Vigilada Mineducaci\\u00F3n\");\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", !ctx.codigoVerificado);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.codigoVerificado);\n        }\n      },\n      dependencies: [i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.RequiredValidator, i4.NgModel],\n      styles: [\".instruccion[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:30px;line-height:1.5}.mensaje-error[_ngcontent-%COMP%]{color:#d32f2f;margin-top:15px;font-size:14px}.mensaje-exito[_ngcontent-%COMP%]{color:#2e7d32;margin-top:15px;font-size:14px}h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}button[_ngcontent-%COMP%]{width:100%;padding:14px;background-color:#333;color:#fff;border:none;border-radius:5px;cursor:pointer;font-weight:700;margin-top:20px;transition:background-color .2s}button[_ngcontent-%COMP%]:hover{background-color:#444}\"]\n    });\n  }\n  return VerificarCodigoComponent;\n})();\nexport { VerificarCodigoComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}