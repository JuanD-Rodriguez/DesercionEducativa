{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/core/services/formulario.service\";\nimport * as i3 from \"@angular/router\";\nfunction FormularioDesercionComponent_form_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"h3\", 14);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 15)(4, \"label\", 16);\n    i0.ɵɵelement(5, \"input\", 17);\n    i0.ɵɵtext(6, \" Totalmente de acuerdo \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"label\", 16);\n    i0.ɵɵelement(8, \"input\", 18);\n    i0.ɵɵtext(9, \" De acuerdo \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"label\", 16);\n    i0.ɵɵelement(11, \"input\", 19);\n    i0.ɵɵtext(12, \" Neutral \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"label\", 16);\n    i0.ɵɵelement(14, \"input\", 20);\n    i0.ɵɵtext(15, \" En desacuerdo \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"label\", 16);\n    i0.ɵɵelement(17, \"input\", 21);\n    i0.ɵɵtext(18, \" Totalmente en desacuerdo \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const grupo_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    let tmp_1_0;\n    i0.ɵɵproperty(\"formGroupName\", i_r4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((tmp_1_0 = grupo_r3.get(\"texto\")) == null ? null : tmp_1_0.value);\n  }\n}\nfunction FormularioDesercionComponent_form_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 5);\n    i0.ɵɵlistener(\"ngSubmit\", function FormularioDesercionComponent_form_6_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.enviarFormulario());\n    });\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵtemplate(2, FormularioDesercionComponent_form_6_div_2_Template, 19, 2, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 8)(4, \"label\", 9);\n    i0.ɵɵtext(5, \"Comentarios adicionales (opcional):\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"textarea\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 11)(8, \"button\", 12);\n    i0.ɵɵtext(9, \"Enviar Formulario\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.formulario);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.respuestas.controls);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.formulario.invalid);\n  }\n}\nfunction FormularioDesercionComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"h3\");\n    i0.ɵɵtext(2, \"\\u00A1Formulario enviado exitosamente!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"Gracias por completar el formulario. Un gestor acad\\u00E9mico revisar\\u00E1 tu informaci\\u00F3n y se pondr\\u00E1 en contacto contigo pronto.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function FormularioDesercionComponent_div_7_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.volver());\n    });\n    i0.ɵɵtext(6, \"Volver al inicio\");\n    i0.ɵɵelementEnd()();\n  }\n}\nlet FormularioDesercionComponent = /*#__PURE__*/(() => {\n  class FormularioDesercionComponent {\n    fb;\n    formularioService;\n    router;\n    formulario;\n    enviado = false;\n    constructor(fb, formularioService, router) {\n      this.fb = fb;\n      this.formularioService = formularioService;\n      this.router = router;\n      this.formulario = this.fb.group({\n        respuestas: this.fb.array([]) // array de respuestas a preguntas\n      });\n    }\n\n    ngOnInit() {\n      this.cargarPreguntas();\n    }\n    get respuestas() {\n      return this.formulario.get('respuestas');\n    }\n    cargarPreguntas() {\n      this.formularioService.getPreguntas().subscribe(preguntas => {\n        preguntas.forEach(preg => {\n          this.respuestas.push(this.fb.group({\n            id_pregunta: [preg.ID_Pregunta],\n            texto: [preg.Texto_Pregunta],\n            respuesta: ['', Validators.required]\n          }));\n        });\n      });\n    }\n    enviarFormulario() {\n      if (this.formulario.valid) {\n        const respuestasFormateadas = this.respuestas.value.map(r => ({\n          id_pregunta: r.id_pregunta,\n          opcion_seleccionada: r.respuesta\n        }));\n        this.formularioService.enviarRespuestas(respuestasFormateadas).subscribe(() => {\n          this.enviado = true;\n          this.router.navigate(['/']);\n        });\n      }\n    }\n    static ɵfac = function FormularioDesercionComponent_Factory(t) {\n      return new (t || FormularioDesercionComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.FormularioService), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: FormularioDesercionComponent,\n      selectors: [[\"app-formulario-desercion\"]],\n      decls: 8,\n      vars: 2,\n      consts: [[1, \"estudiante-layout\"], [1, \"formulario-titulo\"], [1, \"formulario-descripcion\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"mensaje-exito\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [\"formArrayName\", \"respuestas\"], [\"class\", \"pregunta-container\", 3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [1, \"texto-adicional\"], [\"for\", \"comentarios\"], [\"id\", \"comentarios\", \"rows\", \"4\", \"placeholder\", \"Si deseas, puedes a\\u00F1adir informaci\\u00F3n adicional sobre tu situaci\\u00F3n...\"], [1, \"botones-container\"], [\"type\", \"submit\", 1, \"btn-enviar\", 3, \"disabled\"], [1, \"pregunta-container\", 3, \"formGroupName\"], [1, \"pregunta-texto\"], [1, \"opciones-container\"], [1, \"opcion\"], [\"type\", \"radio\", \"formControlName\", \"respuesta\", \"value\", \"Totalmente de acuerdo\"], [\"type\", \"radio\", \"formControlName\", \"respuesta\", \"value\", \"De acuerdo\"], [\"type\", \"radio\", \"formControlName\", \"respuesta\", \"value\", \"Neutral\"], [\"type\", \"radio\", \"formControlName\", \"respuesta\", \"value\", \"En desacuerdo\"], [\"type\", \"radio\", \"formControlName\", \"respuesta\", \"value\", \"Totalmente en desacuerdo\"], [1, \"mensaje-exito\"], [1, \"btn-volver\", 3, \"click\"]],\n      template: function FormularioDesercionComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \"Formulario de Deserci\\u00F3n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 2)(4, \"p\");\n          i0.ɵɵtext(5, \"Este formulario nos ayudar\\u00E1 a comprender mejor los motivos por los cuales consideras abandonar tus estudios. Tus respuestas son confidenciales y nos ayudar\\u00E1n a mejorar nuestros servicios y apoyarte en lo que necesites.\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(6, FormularioDesercionComponent_form_6_Template, 10, 3, \"form\", 3);\n          i0.ɵɵtemplate(7, FormularioDesercionComponent_div_7_Template, 7, 0, \"div\", 4);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", !ctx.enviado);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.enviado);\n        }\n      },\n      encapsulation: 2\n    });\n  }\n  return FormularioDesercionComponent;\n})();\nexport { FormularioDesercionComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}